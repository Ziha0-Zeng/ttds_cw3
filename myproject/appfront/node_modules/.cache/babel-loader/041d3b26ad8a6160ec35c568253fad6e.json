{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: \"SearchResult\",\n  methods: {\n    handleSizeChange(val) {\n      console.log(`每页 ${val} 条`);\n      this.pagesize = val;\n    },\n\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`);\n      this.curpage = val;\n      window.scrollTo(0, 0);\n    },\n\n    goodEvent(index) {\n      axios.get(`http://localhost:8000/myapp/feedback?goodFeedback=${this.papers[index].title}`);\n    },\n\n    badEvent(index) {\n      this.papers[index].isShown = 0;\n      axios.get(`http://localhost:8000/myapp/feedback?badFeedback=${this.papers[index].title}`);\n    }\n\n  },\n\n  data() {\n    return {\n      papers: [],\n      curpage: 1,\n      pagesize: 10,\n      filterMethod: 0\n    };\n  },\n\n  mounted() {\n    this.$bus.$on('getResults', papers => {\n      this.papers = papers;\n    });\n    this.$bus.$on('filter', filterMethod => {\n      this.filterMethod = filterMethod;\n    });\n  },\n\n  watch: {\n    filterMethod: function () {\n      console.log(\"filter method changes\");\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACAA,sBADA;AAEAC;AACAC;AACAC;AACA;AACA,KAJA;;AAMAC;AACAD;AACA;AACAE;AACA,KAVA;;AAYAC;AACAC;AACA,KAdA;;AAgBAC;AACA;AACAD;AACA;;AAnBA,GAFA;;AAyBAE;AACA;AACAC,gBADA;AAEAC,gBAFA;AAGAC,kBAHA;AAIAC;AAJA;AAMA,GAhCA;;AAkCAC;AACA;AACA;AACA,KAFA;AAIA;AACA;AACA,KAFA;AAGA,GA1CA;;AA4CAC;AACAF;AACAV;AACA;AAHA;AA5CA","names":["name","methods","handleSizeChange","console","handleCurrentChange","window","goodEvent","axios","badEvent","data","papers","curpage","pagesize","filterMethod","mounted","watch"],"sourceRoot":"src/components","sources":["SearchResult.vue"],"sourcesContent":["<template>\n<div>\n    <div v-for=\"(paper,index) in papers.slice((curpage - 1) * pagesize, curpage*pagesize)\" :key=\"paper.title\" class=\"paperBox\"> \n\t\t<div v-show=\"paper.isShown===1\">\n\t\t\t<div><a :href=\"paper.url\"><h4 class=\"title\"> {{paper.title}} </h4> </a></div>\n\t\t\t<div class = \"authors\"> {{paper.authors}} </div>\n\t\t\t<div class = \"abstract\"> {{paper.abstract.substring(0,270)}}...</div>\n\t\t\t<span><el-button size=\"small\" circle class=\"rate_btn\" @click=\"goodEvent(index)\"><img src=\"../assets/good.png\" class=\"rate_img\"></el-button></span>\n\t\t\t<span><el-button size=\"small\" circle @click=\"badEvent(index)\"><img src=\"../assets/bad.png\" class=\"rate_img\"></el-button></span>\n\t\t</div>\n\t</div>\n    <div class=\"pagination\">\n\t\t<el-pagination\n\t\tbackground\n\t\t@size-change=\"handleSizeChange\"\n\t\t@current-change=\"handleCurrentChange\"\n\t\t:current-page=\"1\"\n\t\t:page-size=\"pagesize\"\n\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\n\t\t:total=\"papers.length\"\n\t\t>\n\t\t</el-pagination>\n    </div>\n</div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n    name:\"SearchResult\",\n    methods: {\n\t\thandleSizeChange(val) {\n\t\t\tconsole.log(`每页 ${val} 条`);\n\t\t\tthis.pagesize = val;\n\t\t},\n\n\t\thandleCurrentChange(val) {\n\t\t\tconsole.log(`当前页: ${val}`);\n\t\t\tthis.curpage = val;\n\t\t\twindow.scrollTo(0,0)\n\t\t},\n\n\t\tgoodEvent(index){\n\t\t\taxios.get(`http://localhost:8000/myapp/feedback?goodFeedback=${this.papers[index].title}`)\n\t\t},\n\n\t\tbadEvent(index){\n\t\t\tthis.papers[index].isShown = 0\n\t\t\taxios.get(`http://localhost:8000/myapp/feedback?badFeedback=${this.papers[index].title}`)\n\t\t},\n\n\t\t\n    },\n    data() {\n      return {\n        papers:[],\n        curpage:1,\n        pagesize:10,\n        filterMethod: 0,\n      };\n    },\n\n    mounted() {\n      this.$bus.$on('getResults', (papers)=>{\n        this.papers = papers;\n      })\n\n      this.$bus.$on('filter', (filterMethod)=>{\n        this.filterMethod = filterMethod;\n      })\n    },\n\n    watch: {\n      filterMethod: function (){\n        console.log(\"filter method changes\")\n      }\n    }\n\n\n}\n</script>\n\n<style scoped>\n.pagination{\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\n    text-align: center;\n    width: 70%;\n    max-width: 7500px;\n    min-width: 600px;\n   \n}\n\n.paperBox{\n    width: 70%;\n    max-width: 750px;\n    min-width: 600px;\n}\n\n.title{\n    color: blue;\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n\n.authors{\n    color: #006621;\n    font-size: 14px;\n}\n\n.abstract{\n    margin-top: 10px;\n    margin-bottom: 10px;\n\n    font-size: 14px;\n}\n\n.rate_img{\n    height: 17px;\n}\n\n.rate_btn{\n    margin-bottom: 30px;\n    margin-right: 15px;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}