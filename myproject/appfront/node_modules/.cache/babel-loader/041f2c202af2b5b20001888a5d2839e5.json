{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'AdvancedSearch',\n\n  data() {\n    return {\n      sizeForm: {\n        authors: '',\n        keywords: '',\n        startDate: '',\n        endDate: '',\n        dateRange: ''\n      },\n      value: false,\n      startTime: {\n        disabledDate: time => {\n          let endDateVal = this.sizeForm.endDate;\n          console.log(\"start\" + this.sizeForm.endDate);\n\n          if (endDateVal != \"\") {\n            return time.getTime() > new Date(endDateVal).getTime();\n          }\n        }\n      },\n      endTime: {\n        disabledDate: time => {\n          let startDateVal = this.sizeForm.startDate;\n          console.log(\"end\" + this.sizeForm.startDate);\n\n          if (startDateVal != \"\") {\n            return time.getTime() < new Date(startDateVal).getTime();\n          }\n        }\n      }\n    };\n  },\n\n  methods: {\n    onSubmit() {\n      console.log('submit!');\n\n      if (this.sizeForm.keywords.length > 0) {\n        this.$router.push({\n          name: 'searchPage',\n          query: {\n            query: this.sizeForm.keywords,\n            authors: this.sizeForm.authors,\n            startDate: this.sizeForm.startDate,\n            endDate: this.sizeForm.endDate\n          }\n        }); // submit the query\n\n        axios.get(`http://localhost:8000/myapp/advancedSearch/?keyword=${this.sizeForm.keywords}&authors=${this.sizeForm.authors}&startDate=${this.sizeForm.startDate}&endDate=${this.sizeForm.endDate}`).then(response => {\n          console.log(\"success\", response.data);\n          this.$bus.$emit('getUsers', response.data);\n        }, error => {\n          console.log(\"fail\", error.message);\n        });\n      }\n    },\n\n    resetForm() {\n      this.sizeForm.authors = '';\n      this.sizeForm.keywords = '';\n      this.sizeForm.startDate = '';\n      this.sizeForm.endDate = '';\n    }\n\n  },\n  watch: {\n    \"sizeForm.dateRange\": function (newVal) {\n      this.sizeForm.startDate = newVal[0];\n      this.sizeForm.endDate = newVal[1];\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACAA,wBADA;;AAEAC;AACA;AACAC;AACAC,mBADA;AAEAC,oBAFA;AAGAC,qBAHA;AAIAC,mBAJA;AAKAC;AALA,OADA;AAQAC,kBARA;AASAC;AAEAC;AACA;AACAC;;AACA;AACA;AACA;AACA;AARA,OATA;AAmBAC;AACAF;AACA;AACAC;;AACA;AACA;AACA;AACA;AAPA;AAnBA;AA6BA,GAhCA;;AAiCAE;AACAC;AACAH;;AACA;AACA;AACAX,4BADA;AAEAe;AACAA,yCADA;AAEAZ,0CAFA;AAGAE,8CAHA;AAIAC;AAJA;AAFA,WADA,CAWA;;AACAU,kBACA,sLADA,EAEAC,IAFA,CAGAC;AACAP;AACA;AACA,SANA,EAOAQ;AACAR;AACA,SATA;AAWA;AAEA,KA5BA;;AA6BAS;AACA;AACA;AACA;AACA;AACA;;AAlCA,GAjCA;AAuEAC;AACA;AACA;AACA;AACA;AAJA;AAvEA","names":["name","data","sizeForm","authors","keywords","startDate","endDate","dateRange","value","startTime","disabledDate","console","endTime","methods","onSubmit","query","axios","then","response","error","resetForm","watch"],"sourceRoot":"src/components","sources":["AdvanceSearch.vue"],"sourcesContent":["<template>\n    <div>\n        <div>\n            <el-switch\n            :width='40'\n            v-model=\"value\"\n            active-color=\"#5773ff\"\n            inactive-color=\"#f2f2f2\"\n            active-text=\"Advanced Search\"\n            class = \"advanceSearchBtn\">\n            </el-switch>\n        </div>\n        \n        <div>\n            <el-form ref=\"myForm\" :model=\"sizeForm\" size=\"mini\" v-show=\"value\" style=\"width:600px\">\n                <el-row>\n                    <el-col :span=\"12\">\n                        <el-form-item label=\"Keywords\">\n                            <el-input v-model=\"sizeForm.keywords\" placeholder=\"Keywords in paper\" style=\"width:200px\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                        <el-form-item label=\"Authors\">\n                            <el-input v-model=\"sizeForm.authors\" placeholder=\"Authors\" style=\"width:200px\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row>\n                    <el-col :span=\"20\">\n                        <el-form-item label=\"Date\">\n                            <el-date-picker\n                                v-model=\"sizeForm.dateRange\"\n                                type=\"daterange\"\n                                range-separator=\"to\"\n                                start-placeholder=\"Start Date\"\n                                end-placeholder=\"End Date\"\n                                style=\"width:300px\"\n                                format=\"yyyy-MM-dd\"\n                                value-format=\"yyyy-MM-dd\"\n                            >\n                            </el-date-picker>\n                        </el-form-item>\n                    </el-col>\n                    \n                </el-row>\n                \n                <el-form-item size=\"large\">\n                    <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"onSubmit\" style=\"width:100px\">Search</el-button>\n                    <el-button type=\"warning\" @click=\"resetForm\" icon=\"el-icon-refresh-right\" plain style=\"width:100px\">Reset</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    export default {\n        name:'AdvancedSearch',\n        data() {\n            return {\n                sizeForm: {\n                    authors: '',\n                    keywords: '',\n                    startDate: '',\n                    endDate:'',\n                    dateRange:'',\n                },\n                value: false,\n                startTime: {\n\n                    disabledDate: time => {\n                        let endDateVal = this.sizeForm.endDate;\n                        console.log(\"start\" + this.sizeForm.endDate);\n                        if (endDateVal!=\"\") {\n                            return time.getTime() > new Date(endDateVal).getTime();\n                        }\n                    }\n                },\n                endTime: {\n                    disabledDate: time => {\n                        let startDateVal = this.sizeForm.startDate;\n                        console.log(\"end\"+this.sizeForm.startDate);\n                        if (startDateVal!=\"\") {\n                            return time.getTime() < new Date(startDateVal).getTime();\n                        }\n                    }\n                }\n            };\n        },\n        methods: {\n            onSubmit() {\n                console.log('submit!');\n                if(this.sizeForm.keywords.length > 0){\n                    this.$router.push ({\n                        name: 'searchPage',\n                        query:{\n                            query:this.sizeForm.keywords,\n                            authors:this.sizeForm.authors,\n                            startDate:this.sizeForm.startDate,\n                            endDate:this.sizeForm.endDate\n                        }\n                    })\n\n                    // submit the query\n                    axios.get(\n                        `http://localhost:8000/myapp/advancedSearch/?keyword=${this.sizeForm.keywords}&authors=${this.sizeForm.authors}&startDate=${this.sizeForm.startDate}&endDate=${this.sizeForm.endDate}`\n                        ).then(\n                        response => {\n                            console.log(\"success\", response.data);\n                            this.$bus.$emit('getUsers', response.data);\n                        },\n                        error => { \n                            console.log(\"fail\", error.message);\n                        }\n                    )\n                }\n\n            },\n            resetForm(){\n                this.sizeForm.authors='';\n                this.sizeForm.keywords='';\n                this.sizeForm.startDate='';\n                this.sizeForm.endDate='';\n            },\n\n        },\n\n        watch:{\n            \"sizeForm.dateRange\": function(newVal){\n                this.sizeForm.startDate=newVal[0]\n                this.sizeForm.endDate=newVal[1]\n            }\n        }\n    };\n</script>\n\n<style scoped>\n.advanceSearchBtn{\n    padding-top: 10px;\n    padding-bottom: 15px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}